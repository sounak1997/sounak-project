<div class="dashboard-container">
  @if (userProfile) {
    <mat-card>
      <mat-card-header>
        <mat-card-title>Welcome, {{ userProfile.name }}!</mat-card-title>
        <mat-card-subtitle>Email: {{ userProfile.email }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p>This is your personalized dashboard.</p>
        <button mat-raised-button color="accent" (click)="fetchUsersFromProtectedApi()">
          Fetch My Profile (Protected)
        </button>
        @if (userProfile && userProfile._id) {
          <p>Your User ID: {{ userProfile._id }}</p>
        }

        <h4 style="margin-top: 20px;">General Users List (from API):</h4>
        @if (usersFromApi.length > 0) {
          <ul>
            @for (user of usersFromApi; track user.id) {
              <li>{{ user.name }} ({{ user.email }})</li>
            }
          </ul>
        } @else {
          <p>No general users found or failed to load.</p>
        }
      </mat-card-content>
      <mat-card-actions align="end">
        <button mat-raised-button color="warn" (click)="logout()">Logout</button>
      </mat-card-actions>
    </mat-card>
  } @else {
    <mat-card>
      <mat-card-header>
        <mat-card-title>Access Denied</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>Please login to view this page.</p>
      </mat-card-content>
      <mat-card-actions align="end">
        <button mat-button routerLink="/login">Go to Login</button>
      </mat-card-actions>
    </mat-card>
  }
</div>